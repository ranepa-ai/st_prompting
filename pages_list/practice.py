import streamlit as st
import requests


def generate_prompt_response(prompt, api_url='http://localhost:5001/generate'):
    payload = {"prompt": prompt}
    response = requests.post(api_url, json=payload)
    generated_text = response.text
    return generated_text


def practice_page():
    st.header("6. –ü—Ä–∞–∫—Ç–∏–∫–∞ üì°", divider='rainbow')

    # –ó–∞–¥–∞–Ω–∏–µ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
    st.subheader("–ó–∞–¥–∞–Ω–∏–µ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è")

    ex_1 = """–í—ã - –º–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –≤ –∫–æ–º–ø–∞–Ω–∏–∏ '–ò–Ω–æ–¢–µ—Ö–ò–Ω–Ω–æ–≤–∞—Ü–∏–∏', –∫–æ—Ç–æ—Ä–∞—è –≥–æ—Ç–æ–≤–∏—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –≥–∞–¥–∂–µ—Ç - '–£–º–Ω—ã–π –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç'
–≠—Ç–æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ—Ñ–∏—Å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
–ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ GPT-–º–æ–¥–µ–ª–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã—Ö –∏–¥–µ–π –¥–ª—è —Ç–µ–∫—Å—Ç–∞ —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è,
–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—é—â–µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ '–£–º–Ω–æ–≥–æ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞' –∏ –ø—Ä–∏–≤–ª–µ–∫–∞—é—â–µ–≥–æ –≤–Ω–∏–º–∞–Ω–∏–µ —Ü–µ–ª–µ–≤–æ–π –∞—É–¥–∏—Ç–æ—Ä–∏–∏."""
    st.markdown(ex_1)
    prompt_text_1 = st.text_area("   ")
    
    if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å 1"):
        generated_response_1 = generate_prompt_response(prompt_text_1 + '\n–ù–∞–ø–∏—à–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å')
        st.write("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:", generated_response_1)
        
        # –û—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        model_rating_1 = generate_prompt_response(f"–¢–µ–±–µ —Å–µ–π—á–∞—Å –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –æ—Ü–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –∫ –Ω–µ–π (—á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 5 –æ–¥–Ω–∏–º —Å–∏–º–≤–æ–ª–æ–º, –≥–¥–µ 1 —ç—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –æ—Ç–≤–µ—Ç –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç–≤—É–µ—Ç —Ç–µ–º–µ –∏–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–π, –∞ 5 —ç—Ç–æ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç)\n–ó–∞–¥–∞—á–∞: {ex_1}\n–†—É–∑—É–ª—å—Ç–∞—Ç: {generated_response_1}\n –û—Ü–µ–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ:\n")
        st.write("–û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏:", model_rating_1)

    # –ó–∞–¥–∞–Ω–∏–µ 2: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö
    st.subheader("–ó–∞–¥–∞–Ω–∏–µ 2: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö")
    ex_2 = """–í–∞—à–∞ —Ü–µ–ª—å - –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç—è—Ö –Ω–∞ —Ç–µ–º—É '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è'.
–ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ GPT-–º–æ–¥–µ–ª–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –∫—Ä–∞—Ç–∫—É—é –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫—É—é —Å–≤–æ–¥–∫—É –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤,
–≤—ã—Å–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–±—Å—É–∂–¥–µ–Ω–∏—è—Ö –≤ Twitter –∏ Reddit –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞, —Ç–∞–∫–∏–µ –∫–∞–∫ 'online learning', '—É–¥–∞–ª–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ' –∏ —É—Ç–æ—á–Ω–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω
–¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –º–µ—Å—è—Ü–∞."""
    st.write(ex_2)

    prompt_text_2 = st.text_area(" ")
    
    if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å 2"):
        generated_response_2 = generate_prompt_response(prompt_text_2)
        st.write("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:", generated_response_2)
        
        # –û—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        model_rating_2 = generate_prompt_response(f"–¢–µ–±–µ —Å–µ–π—á–∞—Å –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –æ—Ü–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –∫ –Ω–µ–π (—á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 5 –æ–¥–Ω–∏–º —Å–∏–º–≤–æ–ª–æ–º, –≥–¥–µ 1 —ç—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –æ—Ç–≤–µ—Ç –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç–≤—É–µ—Ç —Ç–µ–º–µ –∏–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–π, –∞ 5 —ç—Ç–æ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç)\n–ó–∞–¥–∞—á–∞: {ex_2}\n–†—É–∑—É–ª—å—Ç–∞—Ç: {generated_response_2}\n –û—Ü–µ–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ:\n")
        st.write("–û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏:", model_rating_2)

    # –ó–∞–¥–∞–Ω–∏–µ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ—Å—Å-—Ä–µ–ª–∏–∑–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º
    st.subheader("–ó–∞–¥–∞–Ω–∏–µ 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–µ—Å—Å-—Ä–µ–ª–∏–∑–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º")
    ex_3 = """–í–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è '–ì–ª–æ–±–∞–ª—å–Ω–∞—è –î–∏–Ω–∞–º–∏–∫–∞' –≥–æ—Ç–æ–≤–∏—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é.
–í–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–µ—Å—Å-—Ä–µ–ª–∏–∑ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –µ–≥–æ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π.
–ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ GPT-–º–æ–¥–µ–ª–∏, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–µ—Å—Å-—Ä–µ–ª–∏–∑–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ,
–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞—è –∫–ª—é—á–µ–≤—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.
–ó–∞—Ç–µ–º –∑–∞–ø—Ä–æ—Å–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ —ç—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π, —É—Ç–æ—á–Ω–∏–≤ –≤–∞–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π
—Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ –∏ —Å—Ç–∏–ª—è –≤ –ø–µ—Ä–µ–≤–æ–¥–µ."""
    st.write(ex_3)

    prompt_text_3 = st.text_area("  ")
    
    if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å 3"):
        generated_response_3 = generate_prompt_response(prompt_text_3)
        st.write("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:", generated_response_3)
        
        # –û—Ü–µ–Ω–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        model_rating_3 = generate_prompt_response(f"–¢–µ–±–µ —Å–µ–π—á–∞—Å –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –æ—Ü–µ–Ω–∏—Ç—å –∑–∞–¥–∞—á—É –∏ –æ—Ç–≤–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –∫ –Ω–µ–π (—á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 5 –æ–¥–Ω–∏–º —Å–∏–º–≤–æ–ª–æ–º, –≥–¥–µ 1 —ç—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –æ—Ç–≤–µ—Ç –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç–≤—É–µ—Ç —Ç–µ–º–µ –∏–ª–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–π, –∞ 5 —ç—Ç–æ –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç)\n–ó–∞–¥–∞—á–∞: {ex_3}\n–†—É–∑—É–ª—å—Ç–∞—Ç: {generated_response_3}\n –û—Ü–µ–Ω–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ:\n")
        st.write("–û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏:", model_rating_3)